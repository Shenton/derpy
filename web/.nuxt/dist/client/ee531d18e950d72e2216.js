(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{210:function(t,e,r){"use strict";r.r(e);r(42);var n=r(13),o={name:"Configuration",fetch:function(t){var e=t.store,r=t.redirect;return e.state.auth.isAuth&&e.state.auth.isOwner?void 0:r("/")},head:function(){return{titleTemplate:"%s - "+this.title}},data:function(){return{title:"Configuration",maxVideoDuration:0,maxPlaylistSize:0,volume:0,shard:"steam",shardsSelectOptions:[{value:"kakao",text:"Kakao"},{value:"psn",text:"PS4"},{value:"steam",text:"Steam"},{value:"tournament",text:"Tournaments"},{value:"xbox",text:"Xbox"}],callsPerMinute:1,form:{maxVideoDuration:0,maxPlaylistSize:0,volume:0,shard:"steam",callsPerMinute:1}}},asyncData:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e){var r,n,o,m,l,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$axios,t.prev=1,t.next=4,r.$get("derpy/maxVideoDuration");case 4:return n=t.sent,t.next=7,r.$get("derpy/maxPlaylistSize");case 7:return o=t.sent,t.next=10,r.$get("derpy/volume");case 10:return m=t.sent,t.next=13,r.$get("derpy/pubgShard");case 13:return l=t.sent,t.next=16,r.$get("derpy/pubgCallsPerMinute");case 16:return c=t.sent,t.abrupt("return",{maxVideoDuration:n[0].value,maxPlaylistSize:o[0].value,volume:m[0].value,shard:l[0].value,callsPerMinute:c[0].value});case 20:t.prev=20,t.t0=t.catch(1);case 22:case"end":return t.stop()}},t,null,[[1,20]])}));return function(e){return t.apply(this,arguments)}}(),mounted:function(){this.$store.dispatch("breadcrumbs/setCrumbs",this.$route.path),this.form={maxVideoDuration:this.maxVideoDuration/60,maxPlaylistSize:this.maxPlaylistSize,volume:100*this.volume,shard:this.shard,callsPerMinute:this.callsPerMinute}},methods:{submitUpdate:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e){var r,n,o,m,l,c,d,h,f,x;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),r=60*this.form.maxVideoDuration,n=this.form.maxPlaylistSize,o=this.form.volume/100,m=this.form.shard,l=this.form.callsPerMinute,r===this.maxVideoDuration&&n===this.maxPlaylistSize&&o===this.volume&&m===this.shard&&l===this.callsPerMinute&&this.$toast.warning("Aucune modification"),r===this.maxVideoDuration){t.next=13;break}return t.next=10,this.update(r,"maxVideoDuration","Durée maximum des vidéos modifiée");case 10:c=t.sent,this.maxVideoDuration=c,this.form.maxVideoDuration=c/60;case 13:if(n===this.maxPlaylistSize){t.next=19;break}return t.next=16,this.update(n,"maxPlaylistSize","Nombre d'entrées maximum de la liste de lecture modifiée");case 16:d=t.sent,this.maxPlaylistSize=d,this.form.maxPlaylistSize=d;case 19:if(o===this.volume){t.next=25;break}return t.next=22,this.update(o,"volume","Volume modifié");case 22:h=t.sent,this.volume=h,this.form.volume=100*h;case 25:if(m===this.shard){t.next=31;break}return t.next=28,this.update(m,"pubgShard","Shard modifiée");case 28:f=t.sent,this.shard=f,this.form.shard=f;case 31:if(l===this.callsPerMinute){t.next=37;break}return t.next=34,this.update(l,"pubgCallsPerMinute","Nombre d'appels à l'API de PUBG modifié");case 34:x=t.sent,this.callsPerMinute=x,this.form.callsPerMinute=x;case 37:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),update:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e,r,n){var data;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$axios({method:"patch",data:{value:e},url:"derpy/"+r});case 3:if(0!==t.sent.data.modifed){t.next=8;break}this.$toast.warning("Aucune modification"),t.next=19;break;case 8:return this.$toast.success(n),t.prev=9,t.next=12,this.$axios.$get("derpy/"+r);case 12:return data=t.sent,t.abrupt("return",data[0].value);case 16:t.prev=16,t.t0=t.catch(9),this.$axiosGetErrorHandler(t.t0);case 19:t.next=24;break;case 21:t.prev=21,t.t1=t.catch(0),this.$axiosPostErrorHandler(t.t1,"Configuration non trouvé","Cette configuration existe déjà","Erreur avec l'édition de la configuration");case 24:case"end":return t.stop()}},t,this,[[0,21],[9,16]])}));return function(e,r,n){return t.apply(this,arguments)}}()}},m=r(24),component=Object(m.a)(o,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-jumbotron",{staticClass:"mt-3 mb-3 pt-4 pb-4",attrs:{fluid:"","bg-variant":"dark","text-variant":"light",header:"Administration: Configuration",lead:"Configuration de Derpy."}}),t._v(" "),r("b-container",[r("b-breadcrumb",{attrs:{items:t.$store.state.breadcrumbs.crumbs}})],1),t._v(" "),r("b-container",[r("b-form",{on:{submit:t.submitUpdate}},[r("h2",[t._v("Music")]),t._v(" "),r("hr",{staticClass:"border-primary"}),t._v(" "),r("h4",[t._v("Durée maximum des vidéos: "),r("strong",{staticClass:"text-primary"},[t._v(t._s(t.form.maxVideoDuration)+" minute"+t._s(t.form.maxVideoDuration>1?"s":""))])]),t._v(" "),r("b-input-group",{staticClass:"mb-5",attrs:{prepend:"0",append:"60"}},[r("b-form-input",{attrs:{type:"range",min:"0",max:"60"},model:{value:t.form.maxVideoDuration,callback:function(e){t.$set(t.form,"maxVideoDuration",e)},expression:"form.maxVideoDuration"}})],1),t._v(" "),r("h4",[t._v("Nombre d'entrées maximum de la liste de lecture: "),r("strong",{staticClass:"text-primary"},[t._v(t._s(t.form.maxPlaylistSize)+" entrée"+t._s(t.form.maxPlaylistSize>1?"s":""))])]),t._v(" "),r("b-input-group",{staticClass:"mb-5",attrs:{prepend:"0",append:"40"}},[r("b-form-input",{attrs:{type:"range",min:"0",max:"40"},model:{value:t.form.maxPlaylistSize,callback:function(e){t.$set(t.form,"maxPlaylistSize",e)},expression:"form.maxPlaylistSize"}})],1),t._v(" "),r("h4",[t._v("Volume: "),r("strong",{staticClass:"text-primary"},[t._v(t._s(t.form.volume))])]),t._v(" "),r("b-input-group",{staticClass:"mb-5",attrs:{prepend:"0",append:"100"}},[r("b-form-input",{attrs:{type:"range",min:"0",max:"100"},model:{value:t.form.volume,callback:function(e){t.$set(t.form,"volume",e)},expression:"form.volume"}})],1),t._v(" "),r("h2",[t._v("PUBG")]),t._v(" "),r("hr",{staticClass:"border-primary"}),t._v(" "),r("h4",[t._v("PUBG shard: "),r("strong",{staticClass:"text-primary"},[t._v(t._s(t.form.shard))])]),t._v(" "),r("b-form-select",{staticClass:"mb-5",attrs:{options:t.shardsSelectOptions},model:{value:t.form.shard,callback:function(e){t.$set(t.form,"shard",e)},expression:"form.shard"}}),t._v(" "),r("h4",[t._v("Nombre d'appels à l'API de PUBG par minute: "),r("strong",{staticClass:"text-primary"},[t._v(t._s(t.form.callsPerMinute))])]),t._v(" "),r("b-input-group",{staticClass:"mb-5",attrs:{prepend:"1",append:"8"}},[r("b-form-input",{attrs:{type:"range",min:"1",max:"8"},model:{value:t.form.callsPerMinute,callback:function(e){t.$set(t.form,"callsPerMinute",e)},expression:"form.callsPerMinute"}})],1),t._v(" "),r("b-button",{attrs:{type:"submit",block:"",variant:"primary"}},[t._v("Appliquer les modifications")])],1)],1)],1)},[],!1,null,null,null);e.default=component.exports}}]);